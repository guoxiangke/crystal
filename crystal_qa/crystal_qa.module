<?php
/**
 * @file
 * Almost all the Q&A project requirements which need code are placed in this module.
 */

/**
 * Implementation of hook_init().
 * redirect the url of the question type to questions/%
 * and the answer to it's question page.
 */
function crystal_qa_init() {
  if (arg(0) == 'node' && is_numeric(arg(1)) && arg(2) == '') {
      $node = node_load(arg(1));
      if ($node) {
        if ($node->type == 'answer') {
          drupal_goto('question/'. $node->field_answer['und'][0]['target_id']);
        }
        elseif ($node->type == 'question') {
          drupal_goto('question/'. $node->nid);
        }
    }
  }
}
